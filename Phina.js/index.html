<!doctype html>

<html>
  <head>
    <meta charset='utf-8' />
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <title>Getting started | phina.js</title>
    <!-- phina.js を読み込む -->
    <script src='http://cdn.rawgit.com/phi-jp/phina.js/v0.2.0/build/phina.js'></script>
  </head>
  <body>
    <script src="blockly-master/blockly_compressed.js"></script>
    <script src="blockly-master/blocks_compressed.js"></script>
    <script src="blockly-master/javascript_compressed.js"></script>
    <script src="blockly-master/msg/js/ja.js"></script>
    <!--<script src="test.js"></script>-->
    <script src="d3.js"></script>
    <!--<script src="myblock.js"></script>-->

    <!--<canvas 
      id = "mycanvas" style="height: 50px;width: 50px;">
    </canvas>-->

    <div id="blocklyDiv" style="height: 480px; width: 600px;"></div>
    <button onclick="doCode()">コードの実行</button>
    <xml id="toolbox">
      <block type="go_left"></block>
      <block type="go_right"></block>
      <block type="go_up"></block>
      <block type="go_down"></block>
    </xml>
    <script>
      //Blocklyをdivにはめ込み
      var workspace = Blockly.inject('blocklyDiv',
          {toolbox: document.getElementById('toolbox')});

      function doCode(){
        //ブロックからプログラム（文字列）を作成
        var code = Blockly.JavaScript.workspaceToCode(workspace);
        //プログラムを実行
        try{
          eval(code);
        }
        catch(e){
          alert(e);
        }
      }
    </script>
  </body>
</html>