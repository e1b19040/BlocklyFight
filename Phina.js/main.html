<!DOCTYPE html>
<html>
  <head>
    <title>Blocklyテスト</title>
  </head>
  <body>
    <!-- Blocklyのライブラリ -->
    <script src="blockly-master/blockly_compressed.js"></script>
    <script src="blockly-master/blocks_compressed.js"></script>
    <script src="blockly-master/javascript_compressed.js"></script>
    <script src="blockly-master/msg/js/ja.js"></script>
    <!-- 自作ブロックの定義 -->
    <script src="myblock.js"></script>
    <!-- ワークスペースのエリア -->
    <div id="blocklyDiv" style="height: 480px; width: 600px;"></div>
    <button onclick="doCode()">コードの実行</button>
    <!-- ツールボックスの定義 -->
    <xml id="toolbox">
      <block type="go_left"></block>
      <block type="go_right"></block>
      <block type="go_up"></block>
      <block type="go_down"></block>
    </xml>
    <script>
      //Blocklyをdivにはめ込み
      var workspace = Blockly.inject('blocklyDiv',
          {toolbox: document.getElementById('toolbox')});

      function doCode(){
        //ブロックからプログラム（文字列）を作成
        var code = Blockly.JavaScript.workspaceToCode(workspace);
        //プログラムを実行
        try{
          eval(code);
        }
        catch(e){
          alert(e);
        }
      }
    </script>
  </body>
</html>