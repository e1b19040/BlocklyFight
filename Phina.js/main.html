
<!DOCTYPE html>
<html>
  <head>
    <title>Blockly作成画面</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="description" content="${description}" />
  </head>
  <body>
    <script src="https://cdn.jsdelivr.net/gh/phinajs/phina.js@v0.2.3/build/phina.js"></script>
    <!-- Blocklyのライブラリ -->
    <script src="blockly-master/blockly_compressed.js"></script>
    <script src="blockly-master/blocks_compressed.js"></script>
    <script src="blockly-master/javascript_compressed.js"></script>
    <script src="blockly-master/msg/js/ja.js"></script>
    <!-- 自作ブロックの定義 -->
    <script src="myblock.js"></script>
    <!-- ワークスペースのエリア -->
    <div id="blocklyDiv" style="height: 480px; width: 600px;"></div>
    
    <button onclick="doCode()">コードの実行</button>
    <!-- ツールボックスの定義 -->
    <xml id="toolbox">
      <block type="go_left"></block>
      <block type="go_right"></block>
      <block type="go_up"></block>
      <block type="go_down"></block>
    </xml>
    <script>
      //Blocklyをdivにはめ込み
      var workspace = Blockly.inject('blocklyDiv',
          {toolbox: document.getElementById('toolbox')});

      function doCode(){
        //ブロックからプログラム（文字列）を作成
        var code = Blockly.JavaScript.workspaceToCode(workspace);
        //プログラムを実行
        try{
          eval(code);
        }
        catch(e){
          alert(e);
        }
      }
    </script>
    <button onclick="location.href='Phina.html'">
      移動
    </button>
  </body>
</html>